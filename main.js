"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js").catch(e=>{});const t=document.getElementById("display"),c=document.getElementById("memory-section__value"),a=document.querySelector(".js-errorDialog"),s=document.querySelectorAll("button"),d={0:{action:()=>o(0)},1:{action:()=>o(1)},2:{action:()=>o(2)},3:{action:()=>o(3)},4:{action:()=>o(4)},5:{action:()=>o(5)},6:{action:()=>o(6)},7:{action:()=>o(7)},8:{action:()=>o(8)},9:{action:()=>o(9)},C:{action:()=>i()},"/":{action:()=>o("/")},"*":{action:()=>o("*")},"+":{action:()=>o("+")},"-":{action:()=>o("-")},".":{action:()=>o(".")},"=":{action:()=>r()},"2\u221A":{action:()=>o("\u221A")},"^exp":{action:()=>o("^")},"%":{action:()=>o("%")},"M+":{action:()=>m()},"M-":{action:()=>y()},MR:{action:()=>g()},MC:{action:()=>u()},Close:{action:()=>{i(),a.close()}}};s.forEach(e=>{e.addEventListener("click",()=>{e.getAttribute("aria-label")==="Toggle theme"?f():d[e.textContent].action()})});let n=0;function o(e){t.value+=e}function i(){t.value=""}function u(){c.innerText="0",n=0}function r(){try{const e=t.value;if(!e.trim()||!/^[\d+\-*/().\s^%√]+$/.test(e)){a.showModal();return}const l=e.replace(/√(\d+)/g,"Math.sqrt($1)").replace(/(\d+)\^(\d+)/g,"Math.pow($1, $2)").replace(/(\d+)%/g,"($1 / 100)");t.value=Function("return "+l)()}catch{a.showModal()}}function m(){r();const e=parseFloat(t.value);e&&(n+=e,c.innerText=n,c.style.color="#388e3c")}function y(){r();const e=parseFloat(t.value);e&&(n-=e,c.innerText=n,c.style.color="#ff9800")}function g(){t.value+=n}t.addEventListener("keydown",function(e){(e.code==="Enter"||e.code==="NumpadEnter")&&t.value!==""&&r()}),document.addEventListener("keydown",function(e){e.code==="Escape"&&(i(),a.close())});function f(){window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.toggle("light-mode"):document.body.classList.toggle("dark-mode")}
